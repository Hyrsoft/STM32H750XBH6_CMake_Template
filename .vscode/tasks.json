{
    "version": "2.0.0",
    "inputs": [
        {
            "id": "buildType",
            "type": "pickString",
            "description": "Please select the build type to use",
            "options": [
                "Debug",
                "Release"
            ],
            "default": "Debug"
        }
    ],
    "tasks": [
        {
            "label": "ðŸ”§ Configure",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--preset",
                "${input:buildType}"
            ],
            "group": "build",
            "problemMatcher": [
                "$gcc"
            ],
            "detail": "Generated task for CMake configure"
        },
        {
            "label": "ðŸ”¨ Build",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "--preset",
                "${input:buildType}"
            ],
            "group": {
                "kind": "build",
            },
            "problemMatcher": [
                "$gcc"
            ],
            "dependsOn": "ðŸ”§ Configure",
            "detail": "Generated task for building the project"
        },
        {
            "label": "ðŸ“¥ Flash",
            "type": "shell",
            "command": "pyocd",
            "args": [
                "flash",
                "--target",
                "stm32h750xx",
                "-O",
                "connect_mode=under-reset",
                "./build/${input:buildType}/STM32H750XBH6_Template.bin@0x90000000"
            ],
            "group": "build",
            "detail": "Build and flash the binary to the target device using pyOCD"
        },
        {
            "label": "ðŸ§¹ Clean",
            "type": "shell",
            "command": "bash",
            "args": [
                "-c",
                "rm -rf build"
            ],
            "group": "build",
            "problemMatcher": [],
            "detail": "Generated task for cleaning the build and cache directories"
        },
        {
            "label": "ðŸš€ Clean + Build",
            "detail": "Full Workflow: Clean, Build",
            "dependsOrder": "sequence",
            "dependsOn": [
                "Clean",
                "Build",
            ],
            "group": "build",
        },
        {
            "label": "ðŸš€ðŸš€ Clean + Build + Flash",
            "detail": "Full Workflow: Clean, Build and Flash using pyOCD",
            "dependsOrder": "sequence",
            "dependsOn": [
                "Clean",
                "Build",
                "Flash"
            ],
            "group": "build",
        },
    ]
}